NEXT:
Rom importer

TODO:
Reset 'R'
quest: add quest item on the fly when player takes the quest
admin command to switch an avatar from/to immortal/mortal
item: trash, clothing, map, gem //---, jukebox, protect, room_key
master/pet/follower/group
Monitor Recompute calls
Recompute may leads to recursive call -> redo logic Unequip/Equip/ChangeContainer
Create item from blueprint with specific level and attributes (used for SpellFloatingDisc and other skill/spell creating item)
skills: steal/lore/rescue
spells: create rose, farsight, identfy, mass invis
assign abilities to classes
race form, parts
Dictionary to store Character known ability + keep only one LearnedAbility or replace with KnownAbilities getter based on name
Unit tests on spell/skill to check if method argument matches AbilityTarget, check if ItemInventoryOrCharacterDefensive have both dispel message
Spell with damage + effect (such as ColourSpray) can lead to strange behaviour -> damage kill victim then blindness is cast on victim  -> Damage should return if character has been killed
UnitTests CastFromItem/GetItemAbilityTarget
UnitTests on Rom24Effects

AbilityTargets not yet handled:
	SpellVentriloquate(IAbility ability, int level, ICharacter caster, ICharacter victim, string parameter) // victim + raw parameter

DONE:
AreaBlueprint: flags, and other fields
Reset 'D'
Admin command Resets
Mystery resets fixed, set global limit to -1 and local limit to 1
Add aliases to PlayableCharacter
Cooldown saved
item order in room
container are not closed/locked when resetted -> was not handled when creating blueprint
lock/unlock/open/close fixed for container
admin commands: Ostat, Cstat
Armor from shield added in Recompute
boat
noweapon damagetype for npc
workaround for mystery reset bug
item: money, treasure
short description added on item
name, short desc, description can now be set at creation
silver/gold
moons
room: heal/resource rate, maxsize, sector, light
Death room added: room where PC goes when killed
nasty bug with when PC were killed -> could never go below 1 :)
resets
command min position
Scavenger/Sentinel handled
UpdatePosition call in CharacterUpdate
Aura's level decrease with time
when a spell has damage + effect, the target sometimes dies on damage and can get a null ref exception on additional effect (because Room is set to null for example)
check ACT_WARRIOR, ACT_THIEF, ACT_CLERIC, ACT_MAGE
Combat system (backstab multihit included)
    MultiHit in NonPlayableCharacter and PlayableCharacter
    OneHit in CharacterBase
    AbilityDamage in CharacterBase
    HitDamage in CharacterBase
    GenericDamage in CharacterBase
	hitpoint, manapoint, dam in CharacterBlueprint
Recompute call count optimized when unequiping item
Issue fixed when recompute was causing item to be unequiped, item was removed from equipment but EquippedBy was not set to null
weather
commands: DoWeather
spells: call lightning, control weather
Item types used in Rom24Effects
Rainy used in SpellCreateWater
command quaff, recite
item pill, potion, scroll
Unequip/Equip add optional recompute argument
use GetEquipment where Equipments is reference
prime attribute for class: +2 max train points in this attribute (+3 if human)
IEquippableItem should not exist -> every item with a wear location should be equippable even if it's a furniture or a bag
command all + syntax all reworked
SpellFloatingDisc now uses a new IItemContainer method to set max weight, ...
When putting a container in a container, check if there is no cycle
weapon types + relation to abilities
WearLocations.Float, EquipmentSlots.Float, SpellFloatingDisc
size
equipment wear phrase
container max weight, max items
carry, weight
RoomFlags
IsSafe
GetLearned replaced this[IAbility]
envenom
all skills
    should use UseResult (Ok/Fail) from skill to call check improve (additional attribute param for skill storing improve multiplier)
    wear off message
pick lock added
AddOrUpdateAffect could have an additional parameter with duration, if update is selected -> update duration
AddAura: additional param combine, when adding already existing aura (see affect_join)
Exit flags
closeable items (portal and container)
issue with lightning breath, table-based damage spell, ray of truth
portal flags, charge, load/save
WarpStone + SpellPortal + SpellNexus
Aura.update
ColdEffect: DrinkContainer
PoisonEffect: DrinkContainer/Food
SpellPoison: food
create spring, water, food added
eat command added
food item added
conditions serialize/deserialize added
conditions: drunk/thirst/full/hungry
pour, fill command added
IItemDrinkable tests
drink command added
fountain and liquid table added
issue when impersonating another character while already impersonating (previous was not removed from the game, pure luck if I found this one) fixed
ExitDirectionCount removed
Sneak/Hide
armor on equipment apply in recompute
wear off message <> dispel message (see message send in TryDispels)
Passives not hardcoded anymore in AbilityManager, new attribute [PassiveList] handle this
xp/level
Sneak leave/enter
Train command
shortcuts to BasicAttributes
HitRoll/DamRoll/Armors properties to avoid computing every real formula
race base/max attr, imm, res, vuln added
issue with npc/pc attributes/resources solved
issue with impersonation ImpersonatedBy was set twice, replace ChangeImpersonation with StopImpersonation
issue with player/admin folders not found, is fixed
regen now based on stats and base regen values is an abstract method to avoid cast
Min/MaxHitPerLevel added in classes
Levelling stat increase are now based on tables
CheckAbilityImprove: %age shoud be computed (or table) based on intelligence
CurrentAttributes, CurrentCharacterFlags, CurrentXXX should be accessible with indexers
Needed domain classes copied in POC instead of using Domain ones -> POC will not be impacted by future change in domain
fixed typing command, syntax a, will give duplicate results for atalk
    Commands atalk, admintalk:
        Syntax: atalk|admintalk <message>
        Syntax: atalk|admintalk <message>
when load pfile with unknown resource kind -> crash in ToDictionary because multiple key -1 will be found
gain/practice command
restore command
HP/Move/Resources saved in pfile
remove CharacterBase.RecomputeCommands + StaticCommands + _fullCommands
Class/Race AddAbility additional parameters
Add/Merge abilities from race/class when PlayableCharacter is created/connected
AbilityManager reflection to gather abilities will not work because Spells are not static
    use new system to gather spell/skill/passive: find every class implementing an interface IAbilityImplementation
    those classes will have a predefined ctor with needed interfaces such as ISettings, IRandomManager, ...
Ability wears off message done
Generate skill command in ICharacter and tests Use
Skill practice %
Ability info by class/race
Cast resource/gain exp/check improve
Don't save invalid auras, better use of IsValid on Aura -> store an Aura list in World this will avoid looping on all room/character/item to check aura
Move, Resistances, Alignment added
Rom24 various flags added
Rom24 most spells added
.Net Random direct access removed from RandomManager 
ICharacter.Inventory is the same as Content 
AddAura duration in pulse and not second (-1: permanent)
    change aura/quest/... duration to TimeSpan
Save aura in CharacterData/ItemData
Aura with multiple modifiers
Add AddOrModifyAura to refactor test on GetAura then AddAura or Aura.Modify
Affects save
Full character/item data save
TableGenerator with duplicate columns
	 ----------------------
	|Name  | % || Name  | %|
	|------+---++-------+--|
	|Name1 | 1 || Name2 | 2|
	|Name3 | 3 || Name4 | 5|
	|Name5 | 5             |
	 ----------------------

*************************************************************
automated quests
quest history
linkdead
leaving impersonation should not stop fighting -> PlayableCharacter can still died while not impersonated
  when impersonating, first search for impersonation in world -> use Guid !! should work if player disconnect/reconnect and reimpersonate
make text drunk in say/whisper/... see act_comm.C:2222
when using FindHelper.FindByName on ICharacter and parameter is self -> return itself
redo rom importer
Second/Third/Fourth wield in insectoid
alignment at creation ?
Idea: move HP and move in ResourceKinds
Use SafeList where List is used
Add daze to IPlayableCharacter: will be decreased like GCD and affects skill effectiveness
Move CanSee in IEntity
Move AddAura in aura manager
store an Aura list in World this will avoid looping on all room/character/item to check aura
Save blueprint in Hashtable
Add ctor to every manager with other manager as parameter to easy unit tests
Replace out parameter with C#7-tuple if possible
Enum string representation instead of int in Repository
redo DoScore, DoAffects
check if IStat, MStat and RStat display new informations

gsn_backstab:
	reduce thac0 in one_hit
		thac0 -= 10 * (100 - get_skill(ch,gsn_backstab));
	damage is higher and depends on dagger or not
		if ( dt == gsn_backstab && wield != NULL) 
			if ( wield->value[0] != 2 )
			    dam *= 2 + (ch->level / 10); 
			else 
			    dam *= 2 + (ch->level / 8);


PlayableCharacter can be immortal or not -> don't link immortality to ImpersonatedBy is IAdmin

When an item quest objective is complete, quest item should be NoTake

refactor RawKilled: found in NonPlayableCharacter and PlayableCharacter

refactor damage functions in OneHit, Ability, DamageHelpers

test group
     kill steal

cannot quit while affected by an harmful aura/periodic aura
while leaving(or reconnecting) aura should be removed ? maybe an additional flag saying if timer should decrease while disconnected ?

remove Send(..., bool addTrailingNewLine)
auto paging if data to send to too big?
check if RelativeDisplayName should be used instead of DisplayName in Command (check if CanSee should be used)

quest save completed quests
      quest tree (prereq)
      repeteable or not quests
      autogenerate

better command parser: should be able to specify something like     will be possible with SyntaxAttribute
    [command] [room.character] -> first parameter will be parsed as a character found in room
    [command] [world.character] -> first parameter will be parsed as a character found in world
    [command] [room.item|room.character|inventory.item|equipment.item] -> first will be parsed as an item in room, a character in room, an item in inventory, an item in equipment
wear item
     all
     all.item
look no arg
     in|on|into container
     character
     item
     extradescription
     direction

multitable generator, paging a table should repeat the header at the beginning of each page

autosac, autoloot, auto...
prompt modifiable by user

merge IAdminRepository and IPlayerRepository -> IAccountRepository

move blueprints to Mud.Domain + refactor Mud.Domain

IWorld: should create IReadonlyWorld which only contains getter

default error message with character command if not in correct position

casting time ? (-> spell interrupt is needed) --> delayed actions  [[http://www.mudmagic.com/codes/download/diku/merc/rom/snippets/skills_spells/tcasting.txt]]

unit/integration tests

specialization
talent
OLC
guild
reputation
achievements
AH
help
notes
weather
lua for mob IA

use wiznet(msg, WiznetFlags.Bugs) when LogLevels.Error is used

drink/eat/fill/pour/quaff
pull/push
buy/sell/list

act: add IPlayer, IAdmin -> Name or Impersonated.DisplayName

admin
    at(quite difficult to implement)
    most [MustBeImpersonated] command should work when incarnating
statistics: mob killed, player killed, ...

!! Stunned position is not very well used/defined
use more StringBuilder
check if everywhere if Act should replace Send
use new act formatting: h, b, v whereas possible

prevent kill stealing: a player fights a mob, brings it to 1% and another player performs killing blow (using mob.Fighting)

isValid on aura/periodic aura -> don't remove immediately aura/periodic aura + filter on isValid + remove them during Cleanup phease (--> no more clone of auras needed while modifying/clearing auras, same goes with periodic aura)

Mystery to new format converter (see olc_act.C:2578 for obj values  L4571 for mob values)
Other format (ROM, Merc, ...)

combat table:
http://wowwiki.wikia.com/wiki/Combat
http://wow.gamepedia.com/Attack_table
http://wow.gamepedia.com/Dual_wield
http://wow.gamepedia.com/Crushing_blow

check wheelmud for mccp/mxp

each time operator IS or AS is used, this should be replaced with an overridable method
DoLook/DoExamine should be heavily modified to use Room.Display  Character.Display  (almost every functions in InfoCommands.cs)
IItem: Display(short/long) (used instead of FormatItem in InfoCommands.cs)
EquippedItem should be responsible for displaying itself
EquippedItem: Display (used instead of EquipmentSlotsToString on InfoCommands.cs)

ability:
http://www.wowhead.com/spell=106832/thrash
http://www.wowhead.com/spell=589/shadow-word-pain
http://www.wowhead.com/spell=585/smite
http://www.wowhead.com/spell=17/power-word-shield
http://www.wowhead.com/spell=5176/wrath
http://www.wowhead.com/spell=33917/mangle
http://www.wowhead.com/spell=3127/parry
http://www.wowhead.com/spell=78/heroic-strike

cost: % or fixed amount of resource (mana/rage/energy)
range: not used
cast time: not used ( ??? transformed in wait time before next command)
gcd: wait time before next command
duration: in seconds for dot/hot
school: see DamageTypes
dispel type: ?
effects: list of effect such as weapon damage %, school damage % spellpower, apply aura absorb damage, apply aura periodic damage % spellpower tick seconds, apply aura periodic heal % spellpower tick seconds
flags: require main hand, not shapeshifted, passive

mudbytes
http://www.mudbytes.net/files/tags/RoT/

lua:
http://dotnetslackers.com/articles/wpf/Integrate-Lua-into-WPF-Games.aspx
https://github.com/NLua/NLua
http://stackoverflow.com/questions/24927776/nlua-luainterface-calling-a-function
https://github.com/codefoco/NLuaBox/blob/master/NLuaBoxAppDelegateInternal.cs#L60

hide password:
http://stackoverflow.com/questions/6380257/how-can-i-mask-user-input-when-telneting
http://www.faqs.org/rfcs/rfc854.html
http://stackoverflow.com/questions/3404421/password-masking-console-application

'Random' characters when putty connects - telnet protocol
https://forums.ni.com/t5/facebookforums/facebooksingletopicpage/facebook-app/417075545007603/message-uid/3125842/tab/board
https://tools.ietf.org/html/rfc2877
telnet.h in old mud

MCCP  mud compression protocol
https://en.wikipedia.org/wiki/MCCP
http://tintin.sourceforge.net/mccp/
http://www.jacko.demon.co.uk/aardwolf/aardmccpfaq.txt
http://www.jacko.demon.co.uk/aardwolf/vismccp
http://www.gammon.com.au/mushclient/mccp.htm

check http://www.albahari.com/threading/part3.aspx#_Safe_Cancellation

area file format
http://www.mudmagic.com/codes/download/diku/merc/rom/areas/romstuff.txt

loot table: 
http://www.gammon.com.au/forum/bbshowpost.php?bbsubject_id=9715

rom snippets:
http://www.mudmagic.com/codes/download/diku/merc/rom/snippets/

area:
https://github.com/vedicveko/Mud-Areas

old mobprogram
http://dsmud.wikidot.com/mprog-guide-written-by-xzylvador-from-aarchon-mud